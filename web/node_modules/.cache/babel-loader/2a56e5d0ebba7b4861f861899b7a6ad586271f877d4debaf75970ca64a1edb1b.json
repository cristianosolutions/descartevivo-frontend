{"ast":null,"code":"import _objectSpread from\"C:/Users/CRISTIANO MAGNO/Desktop/descartevivo/frontend/web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useContext}from'react';import{useNavigate}from'react-router-dom';import api from'../api';import{saveAuth}from'../auth';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const[form,setForm]=useState({email:'',password:''});const navigate=useNavigate();const{setUser}=useContext(AuthContext);const handleChange=e=>{setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));};const handleSubmit=e=>{e.preventDefault();api.post('/api/users/login',form).then(res=>{saveAuth(res.data.token,res.data.user);setUser(res.data.user);navigate('/dashboard');}).catch(err=>{var _err$response,_err$response$data;console.error('Erro ao fazer login',err);const msg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Erro ao fazer login.';alert(msg);});};return/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-3 text-center\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",value:form.email,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Senha\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",value:form.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success w-100\",type:\"submit\",children:\"Entrar\"})})]})})})]})});}export default LoginPage;","map":{"version":3,"names":["useState","useContext","useNavigate","api","saveAuth","AuthContext","jsx","_jsx","jsxs","_jsxs","LoginPage","form","setForm","email","password","navigate","setUser","handleChange","e","prev","_objectSpread","target","name","value","handleSubmit","preventDefault","post","then","res","data","token","user","catch","err","_err$response","_err$response$data","console","error","msg","response","message","alert","className","children","onSubmit","type","onChange","required"],"sources":["C:/Users/CRISTIANO MAGNO/Desktop/descartevivo/frontend/web/src/pages/LoginPage.js"],"sourcesContent":["import { useState, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../api';\r\nimport { saveAuth } from '../auth';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nfunction LoginPage() {\r\n    const [form, setForm] = useState({ email: '', password: '' });\r\n    const navigate = useNavigate();\r\n    const { setUser } = useContext(AuthContext);\r\n\r\n    const handleChange = (e) => {\r\n        setForm(prev => ({ ...prev, [e.target.name]: e.target.value }));\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        api.post('/api/users/login', form)\r\n            .then(res => {\r\n                saveAuth(res.data.token, res.data.user);\r\n                setUser(res.data.user);\r\n                navigate('/dashboard');\r\n            })\r\n            .catch(err => {\r\n                console.error('Erro ao fazer login', err);\r\n                const msg = err.response?.data?.message || 'Erro ao fazer login.';\r\n                alert(msg);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className=\"row justify-content-center\">\r\n            <div className=\"col-12 col-md-4\">\r\n                <h2 className=\"mb-3 text-center\">Login</h2>\r\n                <div className=\"card\">\r\n                    <div className=\"card-body\">\r\n                        <form className=\"row g-3\" onSubmit={handleSubmit}>\r\n                            <div className=\"col-12\">\r\n                                <label className=\"form-label\">Email</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    className=\"form-control\"\r\n                                    name=\"email\"\r\n                                    value={form.email}\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"col-12\">\r\n                                <label className=\"form-label\">Senha</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    className=\"form-control\"\r\n                                    name=\"password\"\r\n                                    value={form.password}\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"col-12\">\r\n                                <button className=\"btn btn-success w-100\" type=\"submit\">\r\n                                    Entrar\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}